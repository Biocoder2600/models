<?xml version='1.0' encoding='UTF-8'?>
<model xmlns="http://ccl.northwestern.edu/netlogo/6.1"><version><![CDATA[NetLogo 6.0.2]]></version><previewCommands><manual/></previewCommands><info><![CDATA[## WHAT IS IT?

This model is a modified version of the Disease activity which, simulates the spread of a disease through a population.  In this version the population can consist of students, which are turtles controlled by individual students via the HubNet Client, androids, infectable turtles controlled by the computer and doctors, un-infectable turtles that can heal other turtles.  Doctors do not exist in the Disease activity.

For further documentation on the original Disease activity, see the Participatory Simulations Guide found at http://ccl.northwestern.edu/rp/ps/index.shtml.

## HOW IT WORKS

Turtles move around, possibly catching an infection, either randomly in the case of androids and doctors or as controlled by HubNet clients.  Healthy turtles on the same patch as sick turtles have an INFECTION-CHANCE chance also becoming sick.  A plot shows the number of sick turtles at each time tick, and if SHOW-SICK? is on, sick turtles have a red circle attached to their shape. Both students and androids can become sick, doctors cannot.  If an infectable turtle is on the same patch as a doctor they are cured.

Initially, all turtles are healthy.  A number of turtles equal to INITIAL-NUMBER-SICK become sick when the INFECT button is pressed.

## HOW TO USE IT

Quickstart Instructions:

Teacher: Follow these directions to run the HubNet activity.
Optional: Zoom In (see Tools in the Menu Bar)
Optional: Change any of the settings.
Optional: Add androids and doctors.

Everyone: Open up a HubNet Client on your machine and type your user name, select this activity and press ENTER.

Teacher: Have the students move their turtles around to acquaint themselves with the interface.  Press the INFECT button in the NetLogo interface to start the simulation.

Everyone: Watch the plot of the number infected.

Teacher: To start the activity again with the same group, stop the model by pressing the GO button, if it is on.  Change any of the settings that you would like.  Press the SETUP button or the CURE-ALL button, SETUP will kill the androids and doctors, CURE-ALL will not.

Teacher: Restart the simulation by pressing the GO button again.  Infect some turtles and continue.

Teacher: To start the simulation over with a new group stop the model by pressing the GO button, press the RESET button in the Control Center and follow these instructions again from the beginning.

Buttons:

SETUP - sets all students to an uninfected state, kills all androids, and increments the run-number so the data in the plot will overlay the previous run.
CURE-ALL - sets all turtles to an uninfected state and increments the run-number.
GO - runs the simulation
CREATE-ANDROIDS - adds NUM-ANDROIDS randomly moving turtles to the simulation
CREATE-DOCTORS - adds NUM-DOCTORS turtles that can heal other turtles
INFECT - infects INITIAL-NUMBER-SICK of the turtles in the simulation
NEXT >>> - shows the next quick start instruction
<<< PREVIOUS - shows the previous quick start instruction
RESET INSTRUCTIONS - shows the first quick start instruction

Sliders:

NUM-ANDROIDS - defines how many androids are created by the CREATE-ANDROIDS button
NUM-DOCTORS - defines how many doctors are created by the CREATE-DOCTORS button
ANDROID-DELAY - the delay time, in seconds, for android movement - the higher the number, the slower the androids move
DOCTOR-DELAY - the delay time, in seconds, for doctor movement - the higher the number, the slower the doctors move
INITIAL-NUMBER-SICK - the number of turtles that become infected spontaneously when the INFECT button is pressed
INFECTION-CHANCE - sets the percentage chance that every tenth of a second a healthy turtle will become sick if it is on the same patch as an infected turtle

Switches:

WANDER? - when on, the androids and doctors wander randomly.  When off, they do not move
SHOW-SICK? - when on, sick turtles add to their original shape a red circle.  When off, they can move through the population unnoticed

Monitors:

INFECTABLE TURTLES - the sum of students and androids since doctors cannot be infected.
NUMBER SICK - the number of turtles that are infected

Plots:

NUMBER SICK - shows the number of sick turtles versus time

Client Information

After logging in, the client interface will appear for the students, and if GO is pressed in NetLogo they will be assigned a turtle which will be described in the YOU ARE A: monitor.  Their current location will be shown in the LOCATED AT: monitor.  If the student doesn't like their assigned shape and/or color they can hit the CHANGE APPEARANCE button at any time to change to another random appearance.

The SICK? monitor will show "true" if your turtle is infected, or "false" will be shown if your turtle is not infected.

The student controls the movement of their turtle with the UP, DOWN, LEFT, and RIGHT buttons and the STEP-SIZE slider.  Clicking any of the directional buttons moves their turtle in the appropriate direction a distance of STEP-SIZE.

## THINGS TO NOTICE

If no doctors are present no matter how you change the various parameters, the same basic plot shape emerges.  After using the model once with the students, ask them how they think the plot will change if you alter a parameter and when you add doctors.  Altering the initial percentage sick and the infection chance will have different effects on the plot.

## THINGS TO TRY

Use the model with the entire class to serve as an introduction to the topic.  Then have students use the NetLogo model individually, in a computer lab, to explore the effects of the various parameters.  Discuss what they find, observe, and can conclude from this model.

Ask students to predict how the shape of the plot change will change when doctors are added.

## EXTENDING THE MODEL

Try to make the androids and doctors smarter about how they move around the world.

Experiment with different infection scenarios, for example once a turtle is cured it builds immunity to the disease or turtles may still carry the disease and infect others even after it has been cured.

## RELATED MODELS

Disease
Disease Solo

## HOW TO CITE

If you mention this model or the NetLogo software in a publication, we ask that you include the citations below.

For the model itself:

* Wilensky, U. (2006).  NetLogo HubNet Disease Doctors HubNet model.  http://ccl.northwestern.edu/netlogo/models/HubNetDiseaseDoctorsHubNet.  Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.

Please cite the NetLogo software as:

* Wilensky, U. (1999). NetLogo. http://ccl.northwestern.edu/netlogo/. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.

## COPYRIGHT AND LICENSE

Copyright 2006 Uri Wilensky.

![CC BY-NC-SA 3.0](http://ccl.northwestern.edu/images/creativecommons/byncsa.png)

This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License.  To view a copy of this license, visit https://creativecommons.org/licenses/by-nc-sa/3.0/ or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA.

Commercial licenses are also available. To inquire about commercial licenses, please contact Uri Wilensky at uri@northwestern.edu.

<!-- 2006 -->]]></info><systemDynamics/><linkShapes><linkShape curviness="0.0" name="default"><line stroke-dasharray="0.0,1.0" isVisible="false" offset="-0.2"/><line stroke-dasharray="1.0,0.0" isVisible="true" offset="0.0"/><line stroke-dasharray="0.0,1.0" isVisible="false" offset="0.2"/><indicator editableColorIndex="0" rotatable="true" name="link direction"><elements><line marked="true" filled="false" color="#8D8D8D" y2="180" x2="90" y1="150" x1="150"/><line marked="true" filled="false" color="#8D8D8D" y2="180" x2="210" y1="150" x1="150"/></elements></indicator></linkShape></linkShapes><widgets><view frameRate="30.0" showTickCounter="true" fontSize="10" bottom="541" right="790" top="112" left="362"><dimensions maxPycor="10" minPycor="-10" maxPxcor="10" minPxcor="-10" wrapInY="false" wrapInX="false" patchSize="20.0"/><tickCounterLabel><![CDATA[ticks]]></tickCounterLabel></view><button ticksEnabled="true" forever="true" bottom="48" right="265" top="15" left="182"><source><![CDATA[go]]></source></button><slider direction="horizontal" default="100.0" bottom="166" right="304" top="133" left="157"><maximum><![CDATA[100]]></maximum><minimum><![CDATA[0]]></minimum><step><![CDATA[1]]></step><units><![CDATA[%]]></units><variable><![CDATA[infection-chance]]></variable></slider><button ticksEnabled="false" forever="false" bottom="83" right="180" top="50" left="97"><source><![CDATA[infect-turtles]]></source><display><![CDATA[infect]]></display></button><button ticksEnabled="false" forever="false" bottom="203" right="155" top="170" left="29"><source><![CDATA[make-androids]]></source></button><plot bottom="565" right="312" top="368" left="68" ymax="6.0" ymin="0.0" xmax="25.0" xmin="0.0" legendOn="false" autoPlotOn="true"><display><![CDATA[Number Sick]]></display><xAxis><![CDATA[time]]></xAxis><yAxis><![CDATA[sick]]></yAxis><setup><![CDATA[]]></setup><update><![CDATA[]]></update><pens><pen inLegend="true" color="-16777216" mode="0" interval="1.0"><setup><![CDATA[]]></setup><update><![CDATA[]]></update><display><![CDATA[default]]></display></pen></pens></plot><slider direction="horizontal" default="0.6" bottom="275" right="306" top="242" left="158"><maximum><![CDATA[10]]></maximum><minimum><![CDATA[0]]></minimum><step><![CDATA[0.1]]></step><variable><![CDATA[android-delay]]></variable></slider><slider direction="horizontal" default="6.0" bottom="203" right="305" top="170" left="158"><maximum><![CDATA[200]]></maximum><minimum><![CDATA[1]]></minimum><step><![CDATA[1]]></step><variable><![CDATA[num-androids]]></variable></slider><switch isOn="true" bottom="148" right="155" top="115" left="43"><variable><![CDATA[show-sick?]]></variable></switch><switch isOn="true" bottom="292" right="155" top="259" left="43"><variable><![CDATA[wander?]]></variable></switch><monitor precision="0" fontSize="11" bottom="608" right="199" top="563" left="68"><source><![CDATA[count students + count androids]]></source><display><![CDATA[Infectable Turtles]]></display></monitor><monitor precision="0" fontSize="11" bottom="608" right="312" top="563" left="197"><source><![CDATA[count turtles with [ infected? ]]]></source><display><![CDATA[Number Sick]]></display></monitor><slider direction="horizontal" default="1.0" bottom="131" right="304" top="98" left="157"><maximum><![CDATA[20]]></maximum><minimum><![CDATA[1]]></minimum><step><![CDATA[1]]></step><variable><![CDATA[initial-number-sick]]></variable></slider><button ticksEnabled="false" forever="false" bottom="48" right="180" top="15" left="97"><source><![CDATA[setup]]></source></button><button ticksEnabled="false" forever="false" bottom="103" right="474" top="70" left="356"><source><![CDATA[setup-quick-start]]></source><display><![CDATA[Reset Instructions]]></display></button><button ticksEnabled="false" forever="false" bottom="103" right="802" top="70" left="718"><source><![CDATA[view-next]]></source><display><![CDATA[NEXT >>>]]></display></button><button ticksEnabled="false" forever="false" bottom="103" right="717" top="70" left="639"><source><![CDATA[view-prev]]></source><display><![CDATA[<<< PREV]]></display></button><monitor precision="0" fontSize="11" bottom="65" right="802" top="20" left="356"><source><![CDATA[quick-start]]></source><display><![CDATA[Quick Start Instructions- More in Info Window]]></display></monitor><slider direction="horizontal" default="2.0" bottom="238" right="305" top="205" left="158"><maximum><![CDATA[100]]></maximum><minimum><![CDATA[0]]></minimum><step><![CDATA[1]]></step><variable><![CDATA[num-doctors]]></variable></slider><slider direction="horizontal" default="0.6" bottom="310" right="306" top="277" left="158"><maximum><![CDATA[10]]></maximum><minimum><![CDATA[0]]></minimum><step><![CDATA[0.1]]></step><variable><![CDATA[doctor-delay]]></variable></slider><button ticksEnabled="false" forever="false" bottom="238" right="155" top="205" left="29"><source><![CDATA[make-doctors]]></source></button><button ticksEnabled="false" forever="false" bottom="365" right="238" top="332" left="145"><source><![CDATA[clear-all-plots
set run-number 1
setup-plot]]></source><display><![CDATA[clear-plot]]></display></button><button ticksEnabled="false" forever="false" bottom="83" right="265" top="50" left="182"><source><![CDATA[cure-all]]></source></button></widgets><experiments/><shapes><turtleShape editableColorIndex="0" rotatable="true" name="default"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,5 40,250 150,205 260,250"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="true" name="airplane"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,0 135,15 120,60 120,105 15,165 15,195 120,180 135,240 105,270 120,285 150,270 180,285 210,270 165,240 180,180 285,195 285,165 180,105 180,60 165,15"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="true" name="airplane sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,0 135,15 120,60 120,105 15,165 15,195 120,180 135,240 105,270 120,285 150,270 180,285 210,270 165,240 180,180 285,195 285,165 180,105 180,60 165,15"/><circle marked="false" filled="true" color="#D73229" diameter="90" cy="165" cx="150"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="android"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="210,90 240,195 210,210 165,90"/><circle marked="true" filled="true" color="#8D8D8D" diameter="80" cy="3" cx="110"/><polygon marked="true" filled="true" color="#8D8D8D" points="105,88 120,193 105,240 105,298 135,300 150,210 165,300 195,298 195,240 180,193 195,88"/><rect marked="true" filled="true" color="#8D8D8D" height="15" width="45" y="81" x="127"/><rect marked="false" filled="true" color="#000000" height="27" width="30" y="33" x="135"/><polygon marked="true" filled="true" color="#8D8D8D" points="90,90 60,195 90,210 135,90"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="android sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="210,90 240,195 210,210 165,90"/><circle marked="true" filled="true" color="#8D8D8D" diameter="80" cy="3" cx="110"/><polygon marked="true" filled="true" color="#8D8D8D" points="105,88 120,193 105,240 105,298 135,300 150,210 165,300 195,298 195,240 180,193 195,88"/><rect marked="true" filled="true" color="#8D8D8D" height="15" width="45" y="81" x="127"/><rect marked="false" filled="true" color="#000000" height="27" width="30" y="33" x="135"/><polygon marked="true" filled="true" color="#8D8D8D" points="90,90 60,195 90,210 135,90"/><circle marked="false" filled="true" color="#D73229" diameter="120" cy="120" cx="150"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="box"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,285 285,225 285,75 150,135"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,135 15,75 150,15 285,75"/><polygon marked="true" filled="true" color="#8D8D8D" points="15,75 15,225 150,285 150,135"/><line marked="false" filled="false" color="#000000" y2="135" x2="150" y1="285" x1="150"/><line marked="false" filled="false" color="#000000" y2="75" x2="15" y1="135" x1="150"/><line marked="false" filled="false" color="#000000" y2="75" x2="285" y1="135" x1="150"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="box sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,285 270,225 270,90 150,150"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,150 30,90 150,30 270,90"/><polygon marked="true" filled="true" color="#8D8D8D" points="30,90 30,225 150,285 150,150"/><line marked="false" filled="false" color="#000000" y2="150" x2="150" y1="285" x1="150"/><line marked="false" filled="false" color="#000000" y2="90" x2="30" y1="150" x1="150"/><line marked="false" filled="false" color="#000000" y2="90" x2="270" y1="150" x1="150"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="178" cx="170"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="butterfly"><elements><rect marked="true" filled="true" color="#8D8D8D" height="89" width="115" y="135" x="92"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="53" cx="158"/><circle marked="true" filled="true" color="#8D8D8D" diameter="90" cy="180" cx="165"/><circle marked="true" filled="true" color="#8D8D8D" diameter="90" cy="180" cx="45"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="53" cx="8"/><line marked="false" filled="false" color="#000000" y2="189" x2="253" y1="189" x1="43"/><rect marked="true" filled="true" color="#8D8D8D" height="225" width="30" y="60" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="15" cx="165"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="15" cx="105"/><line marked="true" filled="false" color="#8D8D8D" y2="60" x2="135" y1="30" x1="120"/><line marked="true" filled="false" color="#8D8D8D" y2="30" x2="180" y1="60" x1="165"/><line marked="false" filled="false" color="#000000" y2="285" x2="135" y1="60" x1="135"/><line marked="false" filled="false" color="#000000" y2="60" x2="165" y1="285" x1="165"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="butterfly sick"><elements><rect marked="true" filled="true" color="#8D8D8D" height="89" width="115" y="135" x="92"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="53" cx="158"/><circle marked="true" filled="true" color="#8D8D8D" diameter="90" cy="180" cx="165"/><circle marked="true" filled="true" color="#8D8D8D" diameter="90" cy="180" cx="45"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="53" cx="8"/><line marked="false" filled="false" color="#000000" y2="189" x2="253" y1="189" x1="43"/><rect marked="true" filled="true" color="#8D8D8D" height="225" width="30" y="60" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="15" cx="165"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="15" cx="105"/><line marked="true" filled="false" color="#8D8D8D" y2="60" x2="135" y1="30" x1="120"/><line marked="true" filled="false" color="#8D8D8D" y2="30" x2="180" y1="60" x1="165"/><line marked="false" filled="false" color="#000000" y2="285" x2="135" y1="60" x1="135"/><line marked="false" filled="false" color="#000000" y2="60" x2="165" y1="285" x1="165"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cactus"><elements><rect marked="true" filled="true" color="#8D8D8D" height="147" width="40" y="30" x="135"/><rect marked="true" filled="true" color="#8D8D8D" height="109" width="33" y="105" x="67"/><rect marked="true" filled="true" color="#8D8D8D" height="78" width="34" y="89" x="217"/><rect marked="true" filled="true" color="#8D8D8D" height="34" width="63" y="151" x="157"/><rect marked="true" filled="true" color="#8D8D8D" height="44" width="54" y="189" x="94"/><rect marked="true" filled="true" color="#8D8D8D" height="135" width="49" y="162" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="28" cy="76" cx="219"/><circle marked="true" filled="true" color="#8D8D8D" diameter="34" cy="7" cx="138"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="93" cx="67"/><circle marked="true" filled="true" color="#8D8D8D" diameter="40" cy="145" cx="201"/><circle marked="true" filled="true" color="#8D8D8D" diameter="40" cy="193" cx="69"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cactus sick"><elements><rect marked="true" filled="true" color="#8D8D8D" height="147" width="40" y="30" x="135"/><rect marked="true" filled="true" color="#8D8D8D" height="109" width="33" y="105" x="67"/><rect marked="true" filled="true" color="#8D8D8D" height="78" width="34" y="89" x="217"/><rect marked="true" filled="true" color="#8D8D8D" height="34" width="63" y="151" x="157"/><rect marked="true" filled="true" color="#8D8D8D" height="44" width="54" y="189" x="94"/><rect marked="true" filled="true" color="#8D8D8D" height="135" width="49" y="162" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="28" cy="76" cx="219"/><circle marked="true" filled="true" color="#8D8D8D" diameter="34" cy="7" cx="138"/><circle marked="true" filled="true" color="#8D8D8D" diameter="30" cy="93" cx="67"/><circle marked="true" filled="true" color="#8D8D8D" diameter="40" cy="145" cx="201"/><circle marked="true" filled="true" color="#8D8D8D" diameter="40" cy="193" cx="69"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="car"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="300,180 279,164 261,144 240,135 226,132 213,106 203,84 185,63 159,50 135,50 75,60 0,150 0,165 0,225 300,225 300,180"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="180" cx="180"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="180" cx="30"/><polygon marked="false" filled="true" color="#000000" points="162,80 132,78 134,135 209,135 194,105 189,96 180,89"/><circle marked="true" filled="true" color="#8D8D8D" diameter="58" cy="195" cx="47"/><circle marked="true" filled="true" color="#8D8D8D" diameter="58" cy="195" cx="195"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="car sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="285,208 285,178 279,164 261,144 240,135 226,132 213,106 199,84 171,68 149,68 129,68 75,75 15,150 15,165 15,225 285,225 283,174 283,176"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="180" cx="180"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="180" cx="30"/><polygon marked="false" filled="true" color="#000000" points="195,90 135,90 135,135 210,135 195,105 165,90"/><circle marked="true" filled="true" color="#8D8D8D" diameter="58" cy="195" cx="47"/><circle marked="true" filled="true" color="#8D8D8D" diameter="58" cy="195" cx="195"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="156" cx="171"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cat"><elements><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="210" y1="240" x1="285"/><line marked="true" filled="false" color="#8D8D8D" y2="255" x2="165" y1="300" x1="195"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="90" y1="240" x1="15"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="195" y1="285" x1="285"/><line marked="true" filled="false" color="#8D8D8D" y2="255" x2="135" y1="300" x1="105"/><line marked="false" filled="false" color="#000000" y2="285" x2="150" y1="270" x1="150"/><line marked="false" filled="false" color="#000000" y2="120" x2="15" y1="75" x1="15"/><polygon marked="true" filled="true" color="#8D8D8D" points="300,15 285,30 255,30 225,75 195,60 255,15"/><polygon marked="true" filled="true" color="#8D8D8D" points="285,135 210,135 180,150 180,45 285,90"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,45 120,210 180,210 180,45"/><polygon marked="true" filled="true" color="#8D8D8D" points="180,195 165,300 240,285 255,225 285,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="180,225 195,285 165,300 150,300 150,255 165,225"/><polygon marked="true" filled="true" color="#8D8D8D" points="195,195 195,165 225,150 255,135 285,135 285,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="15,135 90,135 120,150 120,45 15,90"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,195 135,300 60,285 45,225 15,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,225 105,285 135,300 150,300 150,255 135,225"/><polygon marked="true" filled="true" color="#8D8D8D" points="105,195 105,165 75,150 45,135 15,135 15,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="285,120 270,90 285,15 300,15"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="105" y1="285" x1="15"/><polygon marked="true" filled="true" color="#8D8D8D" points="15,120 30,90 15,15 0,15"/><polygon marked="true" filled="true" color="#8D8D8D" points="0,15 15,30 45,30 75,75 105,60 45,15"/><line marked="false" filled="false" color="#000000" y2="262" x2="209" y1="262" x1="164"/><line marked="false" filled="false" color="#000000" y2="261" x2="208" y1="231" x1="223"/><line marked="false" filled="false" color="#000000" y2="262" x2="91" y1="262" x1="136"/><line marked="false" filled="false" color="#000000" y2="261" x2="92" y1="231" x1="77"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cat sick"><elements><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="210" y1="240" x1="285"/><line marked="true" filled="false" color="#8D8D8D" y2="255" x2="165" y1="300" x1="195"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="90" y1="240" x1="15"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="195" y1="285" x1="285"/><line marked="true" filled="false" color="#8D8D8D" y2="255" x2="135" y1="300" x1="105"/><line marked="false" filled="false" color="#000000" y2="285" x2="150" y1="270" x1="150"/><line marked="false" filled="false" color="#000000" y2="120" x2="15" y1="75" x1="15"/><polygon marked="true" filled="true" color="#8D8D8D" points="300,15 285,30 255,30 225,75 195,60 255,15"/><polygon marked="true" filled="true" color="#8D8D8D" points="285,135 210,135 180,150 180,45 285,90"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,45 120,210 180,210 180,45"/><polygon marked="true" filled="true" color="#8D8D8D" points="180,195 165,300 240,285 255,225 285,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="180,225 195,285 165,300 150,300 150,255 165,225"/><polygon marked="true" filled="true" color="#8D8D8D" points="195,195 195,165 225,150 255,135 285,135 285,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="15,135 90,135 120,150 120,45 15,90"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,195 135,300 60,285 45,225 15,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="120,225 105,285 135,300 150,300 150,255 135,225"/><polygon marked="true" filled="true" color="#8D8D8D" points="105,195 105,165 75,150 45,135 15,135 15,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="285,120 270,90 285,15 300,15"/><line marked="true" filled="false" color="#8D8D8D" y2="240" x2="105" y1="285" x1="15"/><polygon marked="true" filled="true" color="#8D8D8D" points="15,120 30,90 15,15 0,15"/><polygon marked="true" filled="true" color="#8D8D8D" points="0,15 15,30 45,30 75,75 105,60 45,15"/><line marked="false" filled="false" color="#000000" y2="262" x2="209" y1="262" x1="164"/><line marked="false" filled="false" color="#000000" y2="261" x2="208" y1="231" x1="223"/><line marked="false" filled="false" color="#000000" y2="262" x2="91" y1="262" x1="136"/><line marked="false" filled="false" color="#000000" y2="261" x2="92" y1="231" x1="77"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="186" cx="186"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cow skull"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,90 75,105 60,150 75,210 105,285 195,285 225,210 240,150 225,105"/><polygon marked="false" filled="true" color="#000000" points="150,150 90,195 90,150"/><polygon marked="false" filled="true" color="#000000" points="150,150 210,195 210,150"/><polygon marked="false" filled="true" color="#000000" points="105,285 135,270 150,285 165,270 195,285"/><polygon marked="true" filled="true" color="#8D8D8D" points="240,150 263,143 278,126 287,102 287,79 280,53 273,38 261,25 246,15 227,8 241,26 253,46 258,68 257,96 246,116 229,126"/><polygon marked="true" filled="true" color="#8D8D8D" points="60,150 37,143 22,126 13,102 13,79 20,53 27,38 39,25 54,15 73,8 59,26 47,46 42,68 43,96 54,116 71,126"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="cow skull sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,90 75,105 60,150 75,210 105,285 195,285 225,210 240,150 225,105"/><polygon marked="false" filled="true" color="#000000" points="150,150 90,195 90,150"/><polygon marked="false" filled="true" color="#000000" points="150,150 210,195 210,150"/><polygon marked="false" filled="true" color="#000000" points="105,285 135,270 150,285 165,270 195,285"/><polygon marked="true" filled="true" color="#8D8D8D" points="240,150 263,143 278,126 287,102 287,79 280,53 273,38 261,25 246,15 227,8 241,26 253,46 258,68 257,96 246,116 229,126"/><polygon marked="true" filled="true" color="#8D8D8D" points="60,150 37,143 22,126 13,102 13,79 20,53 27,38 39,25 54,15 73,8 59,26 47,46 42,68 43,96 54,116 71,126"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="186" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="dog"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="300,165 300,195 270,210 183,204 180,240 165,270 165,300 120,300 0,240 45,165 75,90 75,45 105,15 135,45 165,45 180,15 225,15 255,30 225,30 210,60 225,90 225,105"/><polygon marked="false" filled="true" color="#000000" points="0,240 120,300 165,300 165,285 120,285 10,221"/><line marked="false" filled="false" color="#000000" y2="45" x2="180" y1="60" x1="210"/><line marked="false" filled="false" color="#000000" y2="90" x2="90" y1="45" x1="90"/><line marked="false" filled="false" color="#000000" y2="105" x2="105" y1="90" x1="90"/><line marked="false" filled="false" color="#000000" y2="60" x2="135" y1="105" x1="105"/><line marked="false" filled="false" color="#000000" y2="60" x2="135" y1="45" x1="90"/><line marked="false" filled="false" color="#000000" y2="45" x2="135" y1="60" x1="135"/><line marked="false" filled="false" color="#000000" y2="203" x2="151" y1="203" x1="181"/><line marked="false" filled="false" color="#000000" y2="171" x2="105" y1="201" x1="150"/><circle marked="false" filled="true" color="#000000" diameter="34" cy="88" cx="171"/><circle marked="false" filled="false" color="#000000" diameter="30" cy="162" cx="261"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="dog sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="300,165 300,195 270,210 183,204 180,240 165,270 165,300 120,300 0,240 45,165 75,90 75,45 105,15 135,45 165,45 180,15 225,15 255,30 225,30 210,60 225,90 225,105"/><polygon marked="false" filled="true" color="#000000" points="0,240 120,300 165,300 165,285 120,285 10,221"/><line marked="false" filled="false" color="#000000" y2="45" x2="180" y1="60" x1="210"/><line marked="false" filled="false" color="#000000" y2="90" x2="90" y1="45" x1="90"/><line marked="false" filled="false" color="#000000" y2="105" x2="105" y1="90" x1="90"/><line marked="false" filled="false" color="#000000" y2="60" x2="135" y1="105" x1="105"/><line marked="false" filled="false" color="#000000" y2="60" x2="135" y1="45" x1="90"/><line marked="false" filled="false" color="#000000" y2="45" x2="135" y1="60" x1="135"/><line marked="false" filled="false" color="#000000" y2="203" x2="151" y1="203" x1="181"/><line marked="false" filled="false" color="#000000" y2="171" x2="105" y1="201" x1="150"/><circle marked="false" filled="true" color="#000000" diameter="34" cy="88" cx="171"/><circle marked="false" filled="false" color="#000000" diameter="30" cy="162" cx="261"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="186" cx="126"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="ghost"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="30,165 13,164 -2,149 0,135 -2,119 0,105 15,75 30,75 58,104 43,119 43,134 58,134 73,134 88,104 73,44 78,14 103,-1 193,-1 223,29 208,89 208,119 238,134 253,119 240,105 238,89 240,75 255,60 270,60 283,74 300,90 298,104 298,119 300,135 285,135 285,150 268,164 238,179 208,164 208,194 238,209 253,224 268,239 268,269 238,299 178,299 148,284 103,269 58,284 43,299 58,269 103,254 148,254 193,254 163,239 118,209 88,179 73,179 58,164"/><line marked="false" filled="false" color="#000000" y2="253" x2="215" y1="253" x1="189"/><circle marked="false" filled="true" color="#000000" diameter="30" cy="30" cx="102"/><polygon marked="false" filled="true" color="#000000" points="165,105 135,105 120,120 105,105 135,75 165,75 195,105 180,120"/><circle marked="false" filled="true" color="#000000" diameter="30" cy="30" cx="160"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="ghost sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="30,165 13,164 -2,149 0,135 -2,119 0,105 15,75 30,75 58,104 43,119 43,134 58,134 73,134 88,104 73,44 78,14 103,-1 193,-1 223,29 208,89 208,119 238,134 253,119 240,105 238,89 240,75 255,60 270,60 283,74 300,90 298,104 298,119 300,135 285,135 285,150 268,164 238,179 208,164 208,194 238,209 253,224 268,239 268,269 238,299 178,299 148,284 103,269 58,284 43,299 58,269 103,254 148,254 193,254 163,239 118,209 88,179 73,179 58,164"/><line marked="false" filled="false" color="#000000" y2="253" x2="215" y1="253" x1="189"/><circle marked="false" filled="true" color="#000000" diameter="30" cy="30" cx="102"/><polygon marked="false" filled="true" color="#000000" points="165,105 135,105 120,120 105,105 135,75 165,75 195,105 180,120"/><circle marked="false" filled="true" color="#000000" diameter="30" cy="30" cx="160"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="heart"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="19" cx="152"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,105 240,105 270,135 150,270"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,105 60,105 30,135 150,270"/><line marked="true" filled="false" color="#8D8D8D" y2="135" x2="150" y1="270" x1="150"/><rect marked="true" filled="true" color="#8D8D8D" height="45" width="45" y="90" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="19" cx="14"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="heart sick"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="19" cx="152"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,105 240,105 270,135 150,270"/><polygon marked="true" filled="true" color="#8D8D8D" points="150,105 60,105 30,135 150,270"/><line marked="true" filled="false" color="#8D8D8D" y2="135" x2="150" y1="270" x1="150"/><rect marked="true" filled="true" color="#8D8D8D" height="45" width="45" y="90" x="135"/><circle marked="true" filled="true" color="#8D8D8D" diameter="134" cy="19" cx="14"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="156" cx="171"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="key"><elements><rect marked="true" filled="true" color="#8D8D8D" height="30" width="210" y="120" x="90"/><rect marked="true" filled="true" color="#8D8D8D" height="60" width="30" y="135" x="270"/><rect marked="true" filled="true" color="#8D8D8D" height="60" width="30" y="135" x="195"/><circle marked="true" filled="true" color="#8D8D8D" diameter="150" cy="60" cx="0"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="90" cx="30"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="key sick"><elements><rect marked="true" filled="true" color="#8D8D8D" height="30" width="210" y="120" x="90"/><rect marked="true" filled="true" color="#8D8D8D" height="60" width="30" y="135" x="270"/><rect marked="true" filled="true" color="#8D8D8D" height="60" width="30" y="135" x="195"/><circle marked="true" filled="true" color="#8D8D8D" diameter="150" cy="60" cx="0"/><circle marked="false" filled="true" color="#000000" diameter="90" cy="90" cx="30"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="leaf"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,210 135,195 120,210 60,210 30,195 60,180 60,165 15,135 30,120 15,105 40,104 45,90 60,90 90,105 105,120 120,120 105,60 120,60 135,30 150,15 165,30 180,60 195,60 180,120 195,120 210,105 240,90 255,90 263,104 285,105 270,120 285,135 240,165 240,180 270,195 240,210 180,210 165,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="135,195 135,240 120,255 105,255 105,285 135,285 165,240 165,195"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="leaf sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="150,210 135,195 120,210 60,210 30,195 60,180 60,165 15,135 30,120 15,105 40,104 45,90 60,90 90,105 105,120 120,120 105,60 120,60 135,30 150,15 165,30 180,60 195,60 180,120 195,120 210,105 240,90 255,90 263,104 285,105 270,120 285,135 240,165 240,180 270,195 240,210 180,210 165,195"/><polygon marked="true" filled="true" color="#8D8D8D" points="135,195 135,240 120,255 105,255 105,285 135,285 165,240 165,195"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="141"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="monster"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="75,150 90,195 210,195 225,150 255,120 255,45 180,0 120,0 45,45 45,120"/><circle marked="false" filled="true" color="#000000" diameter="60" cy="60" cx="165"/><circle marked="false" filled="true" color="#000000" diameter="60" cy="60" cx="75"/><polygon marked="true" filled="true" color="#8D8D8D" points="225,150 285,195 285,285 255,300 255,210 180,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="75,150 15,195 15,285 45,300 45,210 120,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="210,210 225,285 195,285 165,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="90,210 75,285 105,285 135,165"/><rect marked="true" filled="true" color="#8D8D8D" height="105" width="30" y="165" x="135"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="monster sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="75,150 90,195 210,195 225,150 255,120 255,45 180,0 120,0 45,45 45,120"/><circle marked="false" filled="true" color="#000000" diameter="60" cy="60" cx="165"/><circle marked="false" filled="true" color="#000000" diameter="60" cy="60" cx="75"/><polygon marked="true" filled="true" color="#8D8D8D" points="225,150 285,195 285,285 255,300 255,210 180,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="75,150 15,195 15,285 45,300 45,210 120,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="210,210 225,285 195,285 165,165"/><polygon marked="true" filled="true" color="#8D8D8D" points="90,210 75,285 105,285 135,165"/><rect marked="true" filled="true" color="#8D8D8D" height="105" width="30" y="165" x="135"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="141" cx="141"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="moon"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="175,7 83,36 25,108 27,186 79,250 134,271 205,274 281,239 207,233 152,216 113,185 104,132 110,77 132,51"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="moon sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="160,7 68,36 10,108 12,186 64,250 119,271 190,274 266,239 192,233 137,216 98,185 89,132 95,77 117,51"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="171"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="star"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="151,1 185,108 298,108 207,175 242,282 151,216 59,282 94,175 3,108 116,108"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="star sick"><elements><polygon marked="true" filled="true" color="#8D8D8D" points="151,1 185,108 298,108 207,175 242,282 151,216 59,282 94,175 3,108 116,108"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="171" cx="156"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="target"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="300" cy="0" cx="0"/><circle marked="false" filled="true" color="#000000" diameter="240" cy="30" cx="30"/><circle marked="true" filled="true" color="#8D8D8D" diameter="180" cy="60" cx="60"/><circle marked="false" filled="true" color="#000000" diameter="120" cy="90" cx="90"/><circle marked="true" filled="true" color="#8D8D8D" diameter="60" cy="120" cx="120"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="true" name="target sick"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="300" cy="0" cx="0"/><circle marked="false" filled="true" color="#000000" diameter="240" cy="30" cx="30"/><circle marked="true" filled="true" color="#8D8D8D" diameter="180" cy="60" cx="60"/><circle marked="false" filled="true" color="#000000" diameter="120" cy="90" cx="90"/><circle marked="true" filled="true" color="#8D8D8D" diameter="60" cy="120" cx="120"/><circle marked="false" filled="true" color="#D73229" diameter="95" cy="163" cx="163"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="wheel"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="294" cy="3" cx="3"/><circle marked="false" filled="true" color="#000000" diameter="240" cy="30" cx="30"/><line marked="true" filled="false" color="#8D8D8D" y2="15" x2="150" y1="285" x1="150"/><line marked="true" filled="false" color="#8D8D8D" y2="150" x2="285" y1="150" x1="15"/><circle marked="true" filled="true" color="#8D8D8D" diameter="60" cy="120" cx="120"/><line marked="true" filled="false" color="#8D8D8D" y2="269" x2="79" y1="40" x1="216"/><line marked="true" filled="false" color="#8D8D8D" y2="221" x2="269" y1="84" x1="40"/><line marked="true" filled="false" color="#8D8D8D" y2="79" x2="269" y1="216" x1="40"/><line marked="true" filled="false" color="#8D8D8D" y2="269" x2="221" y1="40" x1="84"/></elements></turtleShape><turtleShape editableColorIndex="0" rotatable="false" name="wheel sick"><elements><circle marked="true" filled="true" color="#8D8D8D" diameter="294" cy="3" cx="3"/><circle marked="false" filled="true" color="#000000" diameter="240" cy="30" cx="30"/><line marked="true" filled="false" color="#8D8D8D" y2="15" x2="150" y1="285" x1="150"/><line marked="true" filled="false" color="#8D8D8D" y2="150" x2="285" y1="150" x1="15"/><circle marked="true" filled="true" color="#8D8D8D" diameter="60" cy="120" cx="120"/><line marked="true" filled="false" color="#8D8D8D" y2="269" x2="79" y1="40" x1="216"/><line marked="true" filled="false" color="#8D8D8D" y2="221" x2="269" y1="84" x1="40"/><line marked="true" filled="false" color="#8D8D8D" y2="79" x2="269" y1="216" x1="40"/><line marked="true" filled="false" color="#8D8D8D" y2="269" x2="221" y1="40" x1="84"/><circle marked="false" filled="true" color="#D73229" diameter="108" cy="156" cx="156"/></elements></turtleShape></shapes><code><![CDATA[globals
[
  ;; lists used to create the various turtles
  shape-names        ;; list that holds the names of the non-sick shapes a student's turtle can have
  colors             ;; list that holds the colors used for students' turtles
  color-names        ;; list that holds the names of the colors used for students' turtles
  used-shape-colors  ;; list that holds the shape-color pairs that are already being used
  max-possible-codes ;; total number of possible unique shape/color combinations

  ;; when multiple runs are recorded in the plot, this
  ;; tracks what run number we're on
  run-number

  ;; keep track of where the show-sick slider was last time around
  old-show-sick?

  ;; quick start instructions variables
  quick-start  ;; current quickstart instruction displayed in the quickstart monitor
  qs-item      ;; index of the current quickstart instruction
  qs-items     ;; list of quickstart instructions
]

;; doctors cannot be infected but giving them an infected? variable makes code simpler
turtles-own
[
  infected?    ;; if a turtle is sick, infected? is true, otherwise, it is false
  base-shape   ;; original shape of a turtle
  step-size    ;; the amount that a turtle will go forward in the current direction
]

breed [ androids android ]  ;; created by the CREATE-ANDROIDS button, controlled by the simulation
breed [ students student ]  ;; created and controlled by the clients
breed [ doctors  doctor ]   ;; created by the CREATE-DOCTORS button, controlled by the simulation

students-own
[
  user-id  ;; unique id, input by the students when they log in, to identify each student turtle
]


;;;;;;;;;;;;;;;;;;;;;;
;; Setup Procedures ;;
;;;;;;;;;;;;;;;;;;;;;;

to startup
  hubnet-reset
  setup-vars
  setup-plot
  setup-quick-start
end

to setup
  reset-ticks
  ask androids [ die ]
  ask doctors [ die ]

  cure-all
end

to cure-all
  ask turtles
  [
    set infected? false
    if breed = students
      [ update-sick?-monitor ]
    set shape base-shape
  ]

  ;; advance the run-number but don't clear the plot
  ;; so run results can be compared
  set run-number run-number + 1
  setup-plot
end

;; initialize global variables
to setup-vars
  set shape-names [ "box" "star" "wheel" "target" "cat" "dog"
                   "butterfly" "leaf" "car" "airplane"
                   "monster" "key" "cow skull" "ghost"
                   "cactus" "moon" "heart" ]

  ;; these colors were chosen with the goal of having colors
  ;; that are readily distinguishable from each other, and that
  ;; have names that everyone knows (e.g. no "cyan"!), and that
  ;; contrast sufficiently with the red infection dots and the
  ;; gray androids
  set colors      (list white brown green yellow
                        (violet + 1) (sky + 1))
  set color-names ["white" "brown" "green" "yellow"
                   "purple" "blue"]
  set max-possible-codes (length colors * length shape-names)
  set used-shape-colors []
  set-default-shape doctors "android"
  set run-number 1
end

;; create a temporary plot pen for the current run
;; cycle through a few colors so it is easy to
;; differentiate the runs.
to setup-plot
  create-temporary-plot-pen word "run " run-number
  set-plot-pen-color item (run-number mod 5)
                          [blue red green orange violet]
end

to make-androids
  create-androids num-androids
  [
    move-to one-of patches
    face one-of neighbors4
    set color gray
    set infected? false
    set base-shape "android"
    set shape base-shape
    set step-size 1
  ]
end

to make-doctors
  create-doctors num-doctors
  [
    setxy random-xcor random-ycor
    face one-of neighbors4
    set color white
    set infected? false
    set base-shape "android"
    set shape base-shape
    set step-size 1
  ]
end


;;;;;;;;;;;;;;;;;;;;;;;;
;; Runtime Procedures ;;
;;;;;;;;;;;;;;;;;;;;;;;;

to go
  ;; get commands and data from the clients
  listen-clients

  every 0.1
  [
    ;; allow the androids and doctors to wander around the view
    if wander?
      [ wander ]

    ask turtles with [ infected? ]
      [ spread-disease ]

    ask doctors [ heal ]

    tick
    plot count turtles with [ infected? ]
  ]
  ;; we don't want to reset the turtle shapes every time
  ;; through go but we do want to respond to the show-sick?
  ;; switch so keep track of when it's changed
  if show-sick? != old-show-sick?
  [
    ask turtles with [infected?] [ set-sick-shape ]
    set old-show-sick? show-sick?
  ]
end

;; controls the motion of the androids and doctors
to wander
  ;; doctors and androids may wander at different rates
  every android-delay
    [ breed-wander androids ]
  every doctor-delay
    [ breed-wander doctors ]
end

;; have breed-type (a turtle agentset) move around
to breed-wander [ breed-type ]
  ask breed-type
  [
    ;; always move in one of the cardinal directions
    face one-of neighbors4
    fd step-size
  ]
end

;; additional check infect called when student moves to new patch
;; added to avoid rewarding movement
to student-move-check-infect ;; turtle procedure
  if infected?
  [ spread-disease ]

  ask other turtles-here with [ infected? ]
  [ ask myself [ maybe-get-sick ] ]
end

;; spread disease to other turtles here
to spread-disease ;; turtle procedure
  ask other turtles-here with [ breed != doctors ] [ maybe-get-sick ]
end

;; roll the dice and maybe get sick
to maybe-get-sick ;; turtle procedure
  if not infected? [
    if ((random 100) + 1) <= infection-chance
    [ get-sick ] ]
end

;; set the appropriate variables to make this turtle sick
to get-sick ;; turtle procedure
  set infected? true
  set-sick-shape
  if (breed = students)
  [ update-sick?-monitor ]
end

;; change the shape of turtles to its sick shape
;; if show-ill? is true and change the shape to the base-shape if
;; show-ill? is false
to set-sick-shape ;; turtle procedure
  ifelse show-sick?
  [
    ;; we want to check if the turtles shape is already a sick shape
    ;; to prevent flickering in the turtles
    if ( shape != word base-shape " sick" )
    [ set shape word base-shape " sick" ]
  ]
  [
    ;; we want to check if the turtles shape is already a base-shape
    ;; to prevent flickering in the turtles
    if (shape != base-shape)
    [ set shape base-shape ]
  ]
end

;; infected turtles check if they are on the same patch as a doctor.
;; if they are, then they become healthy.
to heal ;; turtle procedure
  ask turtles-here with [ infected? ]
    [
      set infected? false
      set shape base-shape
    ]
end

;; causes the initial infection in the turtle population --
;; infects a random healthy turtle until the desired number of
;; turtles are infected
to infect-turtles
  let healthy-turtles turtles with [ not infected? and breed != doctors ]

  ifelse count healthy-turtles < initial-number-sick
  [
    ask healthy-turtles
    [
      get-sick
      set-sick-shape
    ]
    user-message "There are no more healthy turtles to infect.  Infection stopped."
    stop
  ]
  [
    ask n-of initial-number-sick healthy-turtles
    [
      get-sick
      set-sick-shape
    ]
  ]
end

;;;;;;;;;;;;;;;;;;;;;;;
;; HubNet Procedures ;;
;;;;;;;;;;;;;;;;;;;;;;;

;; determines which client sent a command, and what the command was
to listen-clients
  while [ hubnet-message-waiting? ]
  [
    hubnet-fetch-message
    ifelse hubnet-enter-message?
    [ create-new-student ]
    [
      ifelse hubnet-exit-message?
      [ remove-student ]
      [ execute-command hubnet-message-tag ]
    ]
  ]

  ask students
    [ update-sick?-monitor ]
end

;; NetLogo knows what each student turtle is supposed to be
;; doing based on the tag sent by the node:
;; step-size - set the turtle's step-size
;; Up    - make the turtle move up by step-size
;; Down  - make the turtle move down by step-size
;; Right - make the turtle move right by step-size
;; Left  - make the turtle move left by step-size
;; Get a Different Turtle - change the turtle's shape and color
to execute-command [command]
  if command = "step-size"
  [
    ask students with [user-id = hubnet-message-source]
    [ set step-size hubnet-message ]
    stop
  ]
  if command = "Up"
  [ execute-move 0 stop ]
  if command = "Down"
  [ execute-move 180 stop ]
  if command = "Right"
  [ execute-move 90 stop ]
  if command = "Left"
  [ execute-move 270 stop ]
  if command = "Change Appearance"
  [ execute-change-turtle stop ]
end

;; Create a turtle, set its shape, color, and position
;; and tell the node what its turtle looks like and where it is
to create-new-student
  create-students 1
  [
    setup-student-vars
    send-info-to-clients
  ]
end

;; sets the turtle variables to appropriate initial values
to setup-student-vars  ;; turtle procedure
  set user-id hubnet-message-source
  set-unique-shape-and-color
  move-to one-of patches
  face one-of neighbors4
  set infected? false
  set step-size 1
end

;; pick a base-shape and color for the turtle
to set-unique-shape-and-color ;; turtle procedure
  let code random max-possible-codes
  while [member? code used-shape-colors and count students < max-possible-codes]
  [
    set code random max-possible-codes
  ]
  set used-shape-colors (lput code used-shape-colors)
  set base-shape item (code mod length shape-names) shape-names
  set shape base-shape
  set color item (code / length shape-names) colors
end

;; report the string version of the turtle's color
to-report color-string [color-value]
  report item (position color-value colors) color-names
end

to update-sick?-monitor ;; turtle procedure
  hubnet-send user-id "Sick?" infected?
end

;; sends the appropriate monitor information back to the client
to send-info-to-clients ;; turtle procedure
  hubnet-send user-id "You are a:" (word (color-string color) " " base-shape)
  hubnet-send user-id "Located at:" (word "(" pxcor "," pycor ")")
  update-sick?-monitor
end

;; Kill the turtle, and remove it's shape-color combo from the used list
to remove-student
  ask students with [user-id = hubnet-message-source]
  [
    set used-shape-colors remove my-code used-shape-colors
    die
  ]
end

;; translates a student turtle's shape and color into a code
to-report my-code
  report (position base-shape shape-names) + (length shape-names) * (position color colors)
end

;; Cause the students to move forward step-size in new-heading's heading
to execute-move [new-heading]
  ask students with [user-id = hubnet-message-source]
  [
    set heading new-heading
    fd step-size
    hubnet-send user-id "Located at:" (word "(" pxcor "," pycor ")")

    ;; maybe infect or get infected by turtles on the patch student moved to
    student-move-check-infect
  ]
end

to execute-change-turtle
  ask students with [user-id = hubnet-message-source]
  [
    set used-shape-colors remove my-code used-shape-colors
    show-turtle
    set-unique-shape-and-color
    hubnet-send user-id "You are a:" (word (color-string color) " " base-shape)
    if infected?
    [ set-sick-shape ]
  ]
end

;;; this procedure is handy for testing out additional shapes and colors;
;;; you can call it from the Command Center
to show-gamut
  clear-all
  setup-vars
  create-turtles max-possible-codes [
    fd max-pxcor * 0.7
    if who mod 3 = 0
      [ fd max-pxcor * 0.3 ]
    if who mod 3 = 1
      [ fd max-pxcor * 0.15 ]
    set heading 0
    set-unique-shape-and-color
  ]
  ask patch 0 0 [
    ask patches in-radius 2 [
      sprout-androids 1 [
        set shape "android"
        set color gray
      ]
    ]
  ]
  user-message (word length shape-names
              " shapes * "
              length colors
              " colors = "
              max-possible-codes
              " combinations")
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Quick Start Procedures
;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; instructions to quickly setup the model, and clients to run this activity
to setup-quick-start
  set qs-item 0
  set qs-items
  [
    "Teacher: Follow these directions to run the HubNet activity."
    "Optional: Zoom In (see Tools in the Menu Bar)"
    "Optional: Change any of the settings."
    "Optional: Add androids and doctors."
    "Press the GO button."
    "Everyone: Open up a HubNet Client on your machine and type your user name..."
    "select this activity and press ENTER."
    "Teacher: Have the students move their turtles around..."
    "...to acquaint themselves with the interface."
    "Press the INFECT button in the NetLogo interface to start the simulation."
    "Everyone: Watch the plot of the number infected."
    "Teacher: To start the activity again with the same group..."
    "stop the model by pressing the GO button, if it is on."
    "Change any of the settings that you would like."
    "Press the SETUP button or the CURE-ALL button..."
    "SETUP will kill the androids and doctors, CURE-ALL will not."
    "Teacher: Restart the simulation by pressing the GO button again."
    "Infect some turtles and continue."
    "Teacher: To start the simulation over with a new group,"
    "have all the students log out "
    "...or kick out the clients from the HubNet Control Center."
    "Stop the model by pressing the GO button,"
    "press SETUP and follow these instructions again from the beginning."
  ]
  set quick-start (item qs-item qs-items)
end

;; view the next item in the quickstart monitor
to view-next
  set qs-item qs-item + 1
  if qs-item >= length qs-items
  [ set qs-item length qs-items - 1 ]
  set quick-start (item qs-item qs-items)
end

;; view the previous item in the quickstart monitor
to view-prev
  set qs-item qs-item - 1
  if qs-item < 0
  [ set qs-item 0 ]
  set quick-start (item qs-item qs-items)
end


; Copyright 2006 Uri Wilensky.
; See Info tab for full copyright and license.]]></code><modelSettings/><hubnet><view bottom="430" right="672" top="10" left="252"><dimensions maxPycor="10" minPycor="-10" maxPxcor="10" minPxcor="-10"/></view><button actionKey="I" bottom="166" right="153" top="133" left="91"><display><![CDATA[Up]]></display></button><button actionKey="K" bottom="232" right="153" top="199" left="91"><display><![CDATA[Down]]></display></button><button actionKey="L" bottom="199" right="215" top="166" left="153"><display><![CDATA[Right]]></display></button><button actionKey="J" bottom="199" right="91" top="166" left="29"><display><![CDATA[Left]]></display></button><slider direction="horizontal" default="1.0" bottom="128" right="153" top="95" left="3"><maximum><![CDATA[5.0]]></maximum><minimum><![CDATA[1.0]]></minimum><step><![CDATA[1.0]]></step><variable><![CDATA[step-size]]></variable></slider><monitor precision="3" bottom="59" right="243" top="10" left="156"><display><![CDATA[Located at:]]></display></monitor><monitor precision="3" bottom="59" right="153" top="10" left="3"><display><![CDATA[You are a:]]></display></monitor><monitor precision="3" bottom="128" right="243" top="79" left="156"><display><![CDATA[Sick?]]></display></monitor><button bottom="90" right="153" top="57" left="3"><display><![CDATA[Change Appearance]]></display></button></hubnet></model>
